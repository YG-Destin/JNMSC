<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>J & M ì‹œë„ˆìŠ¤íŠ¸ë¦¬ + íŠ¸ëœì‹¯</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin: 20px; }
    #chart { margin-top: 20px; }
    input, button { margin: 10px; padding: 5px; }
  </style>
</head>
<body>
  <h2>J & M ì‹œë„ˆìŠ¤íŠ¸ë¦¬ + íŠ¸ëœì‹¯ (ì‹¤ì œ ì²œë¬¸)</h2>

  <!-- ë‚ ì§œ/ì‹œê°„ ì…ë ¥ -->
  <label for="datetime">ë‚ ì§œì™€ ì‹œê°„ ì„ íƒ:</label>
  <input type="datetime-local" id="datetime" value="2025-09-03T12:00">
  <button onclick="loadChart()">ì°¨íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°</button>

  <!-- ì°¨íŠ¸ ì¶œë ¥ ì˜ì—­ -->
  <div id="chart"></div>

  <script>
  async function loadChart() {
    const datetime = document.getElementById("datetime").value;
    if (!datetime) {
      alert("ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”!");
      return;
    }

    // ğŸŒ Vercel í”„ë¡ì‹œ ì£¼ì†Œ 
    const url = `https://jnm-swart.vercel.app/api/astro?datetime=${datetime}`;

    try {
      const response = await fetch(url);
      const data = await response.json();

      if (data.data && data.data.imageUrl) {
        document.getElementById("chart").innerHTML =
          `<img src="${data.data.imageUrl}" alt="Astro Chart">`;
      } else {
        document.getElementById("chart").innerHTML = "<p>ì°¨íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>";
        console.log(data);
      }
    } catch (error) {
      document.getElementById("chart").innerHTML = "<p>ì—ëŸ¬ ë°œìƒ! ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.</p>";
      console.error(error);
    }
  }
  </script>
</body>
</html>